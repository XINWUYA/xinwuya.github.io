---
title: 【C++笔记】01 数组
tags: C++笔记
key: CPP_NOTES_ARRAY
---

# 数组

## 1.

```c++
char a[] = "hello";
a[0] = 'x';//正确

char *p = "hello";
p[0] = 'x';//错误

char *q = a;
q[0] = 'x';//正确
```

a为一个数组，内存分配在栈上，可以通过数组名或指向数组的指针进行修改，而`** p`值相的是位于文字常量区的字符串，是不允许被修改的，但使用`p[0]`访问相应的元素是正确的，只是不能修改`**`。

## 2.数组的首地址是常量，不可以进行赋值操作。

- 数组定义中类型不能是引用，即没有引用数组，因为引用是不能赋值的，而数组中的元素必须可以被赋值， 如`int& a[10]`为一种错误的定义；

## 3.数组元素的初始化：

- 函数体外定义的内置类型数组（即内置类型的全局数组），元素初始化为0；
- 函数体内定义的内置类型数组，元素无初始化，若只初始化部分元素，其后的元素此时也会被初始化为0；
- 如果不是内置类型，则不管其在哪定义，自动调用默认构造函数初始化，若该类无默认构造函数，则报错。

注：在声明数组时，除了宏替换可以用来定义数组的长度，在C++中可以用const常量来定义也是可以的，但该方式不适用于C。

## 4.逗号运算符：

多个表达式可以用逗号分开，其中用逗号分开的表达式的值分别结算，但整个表达式的值是最后一个表达式的值。

注：赋值运算符比逗号运算符优先级高。如：`int a = (7, 8, 9);` 此时a=9；而`int a = 7, 8, 9;`此时a=7。

## 5.当数组作为函数实参传递时，传递的是数组首元素的地址。而将数组某一个元素的地址当作实参时，传递的是此元素的地址。

## 6.对于二维数组`a[m][n]`, 

- a表示指向数组首元素`a[0]`的指针，为常量，不可进行赋值；

- `a[0]`为5个int组成的数组，表示指向数组`a[0]`首元素a`[0][0]`的指针；

- `&a`表示数组的首地址， `&a+1`跳过m行n列；

- 该数组各种指针类型对应：

  |       指针        |      类型       |                          备注                          |
  | :---------------: | :-------------: | :----------------------------------------------------: |
  |        `a`        |  `int(* )[n]`   |              `a+i`的类型也同为`int(* )n`               |
  |   `* a`或`a[0]`   |     `int*`      |       `* a`为指向数组`a[0]`首元素`a[0][0]`的指针       |
  | `* (a+1)`或`a[1]` |     `int*`      | `* (a+1)`或`a[1]`为指向数组`a[1]`首元素`a[1][0]`的指针 |
  |   * (* (a+1)+2)   |      `int`      |                指向数组`a[1][2]`的指针                 |
  |       `&a`        | `int(* )[m`][n] |                                                        |
  |       `a+i`       |  `int(* )[n]`   |                                                        |
  |     `* (a+i)`     |     `int*`      |                                                        |
  |  `* (* (a+i)+j)`  |      `int`      |   `* (a+i)=a[i];  * (* (a+i)+j)=* (a[i]+j)=a[i][j]`    |

  


## 7.线性表和顺序表：

线性表是一种逻辑结构，表示元素之间一对一的相邻关系，顺序表和链表是存储结构。

- 线性表中的元素的位序是从1开始的，数组中元素的下标是从0开始的；
- 顺序表可以进行随机存储，即通过首地址和元素序号可以在O(1)的时内进行元素查找；
- 顺序表插入和删除操作则需要移动大量元素，插入和删除的平均移动次数分别为n/2和(n-1)/2，按值查找需要比较的平均次数为(n+1)/2，这三种操作的平均时间复杂度均为O(n)。